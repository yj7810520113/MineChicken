<!--
 * Created by WebStorm
 * User:maomao,http://www.mmcode.top
 * Date:2017/8/10
 * Time:16:23
 -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../assets/js/D3.V4.js"></script>
</head>

<body style="background: url('../assets/img/screenjpg.jpg')">

<div  style="background:rgba(26,35,126,1) url('../assets/img/大屏幕背景图.png');height: 100%;width: 100%;">
    <span style="text-align: center;color: rgba(233,30,99,1);font-size: 30px;position:absolute;top: 100px;left:500px;" id="dayTime"></span>

    <svg height="900px" width="1300px" style="margin-left: 100px;margin-top: 100px;background:rgba(63,94,181,0.9);">
        <defs>
            <linearGradient id="normalLinear" x1="0%" y1="0%" x2="100%" y2="0%" spreadMethod="pad">
            </linearGradient>

        </defs>

        <rect x="20" y="20" width="400" height="10"/>
    </svg>
</div>
<script>

let svg=d3.select('svg');

function parseAreaDatas(d){
    //        console.log(d3.timeFormat('%Y-%m-%d %H-%M-%S').format(d.daydatetime));
    return {
        daydatetime:d.daydatetime,
//        daydatetime:parseDate(d.daydatetime,'Y-m-d H:M:S'),
        aver_speed_offset:parseFloat(d.aver_speed_offset),
    }
}

d3.queue()
    .defer(d3.csv, "渐变颜色.csv", parseAreaDatas)
    //        .defer(d3.csv, "budget-deficit-gdp.csv", parseBudgetDeficit)
    //        .defer(d3.csv, "governments.csv", parseGovernments)
    .await(ready);
function ready(error, data) {
    let length=data.length;
    console.log(data);



    var delayMapXScale = d3.scaleLinear()
        .domain([0,length])
        .range(["0%", "100%"]);
    var delayMapColorScale = d3.scaleLinear()
        .interpolate(d3.interpolateLab)
        .domain([0, 0.2,0.55,0.7,1])
        .range(['#42bd41','#42bd41','#ffb74d','#ff8a65','#e84e40']);


    d3.select('#normalLinear').selectAll('stop')
        .data(data)
        .enter()
        .append("svg:stop")
        .attr("offset", function (d,i) { return delayMapXScale(i); })
        .attr("stop-color", function (d) { return delayMapColorScale(d.aver_speed_offset); })
        .attr("stop-opacity", 1);
    d3.select('rect').attr('fill','url(#normalLinear)')

}

</script>
</body>
</html>